<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Undangan Akikah - Aruna Darisa Hermansyah</title>
  <link rel="stylesheet" href="styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <link rel="icon" type="image/png" href="foto3.jpg">
</head>
<body>
  <!-- Musik Latar -->
  <audio id="bg-music" autoplay loop muted>
    <source src="music.mp3" type="audio/mpeg">
  </audio>
  <button id="toggleMusic">🔊</button>

  <div class="container">
    <header class="hero">
      <h1 class="title">Undangan Akikah</h1>
      <h2 class="name">Aruna Darisa Hermansyah</h2>
      <p class="parents">Putri dari Bapak Riko Hermansyah & Ibu Tiara Anggrainy</p>
    </header>

    <section class="event card">
      <h3>🕊 Detail Acara</h3>
      <p><strong>Tanggal:</strong> Sabtu, 11 Oktober 2025</p>
      <p><strong>Waktu:</strong> 13:00 WIB</p>
      <p><strong>Tempat:</strong> Jl. Korindo Gg. Damai (Depan Pertashop Korindo)</p>
      <a class="btn" href="https://maps.app.goo.gl/XQ4m3kUsujXatx9J8" target="_blank">📍 Lihat di Google Maps</a>
    </section>

    <section class="countdown card">
      <h3>⏳ Hitung Mundur</h3>
      <div id="timer">00 Hari 00 Jam 00 Menit 00 Detik</div>
    </section>

    <!-- Galeri Foto -->
    <section class="gallery card">
      <h3>📸 Galeri Aruna</h3>
      <div class="photos">
        <img src="foto1.jpg" alt="Foto Bayi 1">
        <img src="foto2.jpg" alt="Foto Bayi 2">
        <img src="foto3.jpg" alt="Foto Bayi 3">
      </div>
    </section>

    <form id="rsvpForm">
        <input type="text" id="nama" placeholder="Nama Anda" required>
        <select id="status" required>
            <option value="">Pilih Kehadiran</option>
            <option value="Hadir">Hadir</option>
            <option value="Tidak Hadir">Tidak Hadir</option>
        </select>
        <button type="submit">Kirim</button>
    </form>

    <!-- Daftar RSVP akan muncul di sini -->
    <ul id="listRsvp"></ul>
    
    <script>
  // -------------------------
  // Ganti dengan Form ID Google Form kamu
  // Ganti YOUR_FORM_ID dengan ID form kamu
  const FORM_URL = "https://docs.google.com/forms/d/1t_fzWzI6Vr4JVn_IDOJIwpEDv4XrJTqviYJLV7F9Izw/formResponse";

  // Ganti dengan entry ID dari pre-filled link
  const ENTRY_NAMA = "entry.355986079";   
  const ENTRY_STATUS = "entry.3451422"; 

  // Web App untuk ambil daftar RSVP
  const API_URL = "https://script.google.com/macros/s/AKfycbyMydZ4H2uHSwy2Bugj7IdwiHRQXfzp-5yANxcd8dfcZcu5iaj0yNmt6JTZPmdWeRCZWg/exec";

  // -------------------------

  const form = document.getElementById("rsvpForm");
  const listRsvp = document.getElementById("listRsvp");
  let rsvpData = [];

  // -------------------------
  // Submit form ke Google Form
  form.addEventListener("submit", e => {
    e.preventDefault();
    const nama = document.getElementById("nama").value.trim();
    const status = document.getElementById("status").value;

    // Cek duplikasi
    if (rsvpData.some(item => item.nama.toLowerCase() === nama.toLowerCase())) {
      alert("Nama ini sudah RSVP sebelumnya!");
      return;
    }

    const formData = new FormData();
    formData.append(ENTRY_NAMA, nama);
    formData.append(ENTRY_STATUS, status);

    fetch(FORM_URL, { method: "POST", body: formData, mode: "no-cors" })
      .then(() => {
        alert("RSVP berhasil dikirim! 🎉");
        form.reset();
        fetchRSVP(); // refresh daftar
      })
      .catch(err => console.error(err));
  });

  // -------------------------
  // JSONP callback function
  function loadRSVP(data) {
    rsvpData = data;
    listRsvp.innerHTML = "";
    data.forEach(item => {
      const li = document.createElement("li");
      li.textContent = `${item.nama} - ${item.status}`;
      listRsvp.appendChild(li);
    });
  }

  // -------------------------
  // Fungsi panggil JSONP
  function fetchRSVP() {
    const script = document.createElement("script");
    script.src = `${API_URL}?callback=loadRSVP&_=${Date.now()}`;
    document.body.appendChild(script);
    script.onload = () => document.body.removeChild(script);
  }

  // Load daftar pertama kali
  fetchRSVP();

  // Refresh otomatis tiap 10 detik
  setInterval(fetchRSVP, 10000);
</script>


    <footer>
      <p>Terima kasih atas doa & kehadiran Anda 💖</p>
    </footer>
  </div>

  <script src="script.js"></script>
</body>
</html>

